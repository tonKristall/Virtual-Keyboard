(()=>{"use strict";const e="krBiZQPnF5dX4cW123TA",t="wnZeeXhue1b2yuzG4UdA",n="wGCYe4y5HN7bJYTJ4E3t",r="DZMKMGMoFnKyZ7GiMi99",s="h66OLueUwhS7RGoC3txX",o="tonKristall-keyboard-lang",a="div",l={system_info:"Клавиатура создана в операционной системе Windows",change_lang:"Комбинация для переключения языка: левый Alt + Ctrl"};class i{el;constructor(e,t){this.renderEl=null,this.setEl(e,t)}render(e,t){return this.renderEl=document.createElement(e),this.renderEl.className=t.join(" "),this.renderEl}setEl(e,t){this.el=this.render(e,t)}getEl(){return this.el}}class h extends i{constructor(e,t,n=""){super(e,t),this.innerText=n,this.addText()}addText(){this.el.textContent=this.innerText}}const c={lang:localStorage.getItem(o)?localStorage.getItem(o):"en"};class d extends h{constructor(e,t,n,r){super(e,t,n[c.lang].normal),this.key=n,this.textArea=r,this.addShiftText()}addShiftText(){const e=this.key[c.lang].normal,t=this.key[c.lang].shift;if(" "===e&&this.el.classList.add("zjvKMQg_aib1O5IFwwrt"),void 0!==t){const e=this.render(a,["nbnwwWV8gu6ZVqLBj8cJ"]);e.textContent=t,e.classList.add(r),this.el.appendChild(e)}}}const m=new i(a,["ZIcQLmbJ7HmKZpTpsVjp"]).getEl(),u=new i("header",[e,"u85k1inkxGtOfjG3eSHm"]).getEl(),f=new h("h1",["mQQAS2ffhSzkXsWMEPve"],"virtual keyboard").getEl(),p=new i(a,[e,t]).getEl(),g=new i("main",[e,"inMTzEj51DEaKs2LzZWM"]).getEl(),y=new h("textarea",["mKAQwQNX8oUESklIpqZz"]).getEl(),x=new i(a,[e,t]).getEl(),A=new i("footer",["_LuyXAWlUtr1vyS2SP7P"]).getEl(),E=[];[[{en:{normal:"`",shift:"~"},ru:{normal:"ё",shift:""},code:"Backquote"},{en:{normal:"1",shift:"!"},ru:{normal:"1",shift:"!"},code:"Digit1"},{en:{normal:"2",shift:"@"},ru:{normal:"2",shift:'"'},code:"Digit2"},{en:{normal:"3",shift:"#"},ru:{normal:"3",shift:"№"},code:"Digit3"},{en:{normal:"4",shift:"$"},ru:{normal:"4",shift:";"},code:"Digit4"},{en:{normal:"5",shift:"%"},ru:{normal:"5",shift:"%"},code:"Digit5"},{en:{normal:"6",shift:"^"},ru:{normal:"6",shift:":"},code:"Digit6"},{en:{normal:"7",shift:"&"},ru:{normal:"7",shift:"?"},code:"Digit7"},{en:{normal:"8",shift:"*"},ru:{normal:"8",shift:"*"},code:"Digit8"},{en:{normal:"9",shift:"("},ru:{normal:"9",shift:"("},code:"Digit9"},{en:{normal:"0",shift:")"},ru:{normal:"0",shift:")"},code:"Digit0"},{en:{normal:"-",shift:"_"},ru:{normal:"-",shift:"_"},code:"Minus"},{en:{normal:"=",shift:"+"},ru:{normal:"=",shift:"+"},code:"Equal"},{en:{normal:"Backspace"},ru:{normal:"Backspace"},code:"Backspace"}],[{en:{normal:"Tab"},ru:{normal:"Tab"},code:"Tab"},{en:{normal:"q"},ru:{normal:"й"},code:"KeyQ"},{en:{normal:"w"},ru:{normal:"ц"},code:"KeyW"},{en:{normal:"e"},ru:{normal:"у"},code:"KeyE"},{en:{normal:"r"},ru:{normal:"к"},code:"KeyR"},{en:{normal:"t"},ru:{normal:"е"},code:"KeyT"},{en:{normal:"y"},ru:{normal:"н"},code:"KeyY"},{en:{normal:"u"},ru:{normal:"г"},code:"KeyU"},{en:{normal:"i"},ru:{normal:"ш"},code:"KeyI"},{en:{normal:"o"},ru:{normal:"щ"},code:"KeyO"},{en:{normal:"p"},ru:{normal:"з"},code:"KeyP"},{en:{normal:"[",shift:"{"},ru:{normal:"х",shift:""},code:"BracketLeft"},{en:{normal:"]",shift:"}"},ru:{normal:"ъ",shift:""},code:"BracketRight"},{en:{normal:"\\",shift:"|"},ru:{normal:"\\",shift:"/"},code:"Backslash"},{en:{normal:"Del"},ru:{normal:"Del"},code:"Delete"}],[{en:{normal:"CapsLock"},ru:{normal:"CapsLock"},code:"CapsLock"},{en:{normal:"a"},ru:{normal:"ф"},code:"KeyA"},{en:{normal:"s"},ru:{normal:"ы"},code:"KeyS"},{en:{normal:"d"},ru:{normal:"в"},code:"KeyD"},{en:{normal:"f"},ru:{normal:"а"},code:"KeyF"},{en:{normal:"g"},ru:{normal:"п"},code:"KeyG"},{en:{normal:"h"},ru:{normal:"р"},code:"KeyH"},{en:{normal:"j"},ru:{normal:"о"},code:"KeyJ"},{en:{normal:"k"},ru:{normal:"л"},code:"KeyK"},{en:{normal:"l"},ru:{normal:"д"},code:"KeyL"},{en:{normal:";",shift:":"},ru:{normal:"ж",shift:""},code:"Semicolon"},{en:{normal:"'",shift:'"'},ru:{normal:"э",shift:""},code:"Quote"},{en:{normal:"Enter"},ru:{normal:"Enter"},code:"Enter"}],[{en:{normal:"Shift"},ru:{normal:"Shift"},code:"ShiftLeft"},{en:{normal:"z"},ru:{normal:"я"},code:"KeyZ"},{en:{normal:"x"},ru:{normal:"ч"},code:"KeyX"},{en:{normal:"c"},ru:{normal:"с"},code:"KeyC"},{en:{normal:"v"},ru:{normal:"м"},code:"KeyV"},{en:{normal:"b"},ru:{normal:"и"},code:"KeyB"},{en:{normal:"n"},ru:{normal:"т"},code:"KeyN"},{en:{normal:"m"},ru:{normal:"ь"},code:"KeyM"},{en:{normal:",",shift:"<"},ru:{normal:"б",shift:""},code:"Comma"},{en:{normal:".",shift:">"},ru:{normal:"ю",shift:""},code:"Period"},{en:{normal:"/",shift:"?"},ru:{normal:".",shift:","},code:"Slash"},{en:{normal:"▲"},ru:{normal:"▲"},code:"ArrowUp"},{en:{normal:"Shift"},ru:{normal:"Shift"},code:"ShiftRight"}],[{en:{normal:"Ctrl"},ru:{normal:"Ctrl"},code:"ControlLeft"},{en:{normal:"Win"},ru:{normal:"Win"},code:"MetaLeft"},{en:{normal:"Alt"},ru:{normal:"Alt"},code:"AltLeft"},{en:{normal:" "},ru:{normal:" "},code:"Space"},{en:{normal:"Alt"},ru:{normal:"Alt"},code:"AltRight"},{en:{normal:"Ctrl"},ru:{normal:"Ctrl"},code:"ControlRight"},{en:{normal:"◄"},ru:{normal:"◄"},code:"ArrowLeft"},{en:{normal:"▼"},ru:{normal:"▼"},code:"ArrowDown"},{en:{normal:"►"},ru:{normal:"►"},code:"ArrowRight"}]].forEach((e=>{const t=new i(a,["z_myaDAMNsnJsns3bKYA"]).getEl();e.forEach((e=>{const r=new d(a,["myKSNqWgrE1zBIiDAdQF",n],e,y).getEl();E.push({keyValue:e,keyElement:r}),t.appendChild(r)})),x.appendChild(t)})),Object.keys(l).forEach((e=>{const t=new h(a,[],l[e]).getEl();A.appendChild(t)})),y.setAttribute("rows","10");const k=new class{constructor(e,t,n){this.keys=t,this.keyboard=e,this.caps={press:!1,on:!1},this.shift=!1,this.changeLang=!1,this.sortedKeys=this.sortKeys(),this.textArea=n,this.inputValue=[]}sortKeys(){const e={};return this.keys.forEach((t=>{const{keyElement:s,keyValue:o}=t;this.changeLang&&(s.childNodes[0].textContent=o[c.lang].normal,s.children.length&&(s.childNodes[1].textContent=o[c.lang].shift)),s.classList.remove(r),s.classList.add(n),s.children.length&&s.children[0].textContent.length&&(this.shift?(s.classList.remove(n),s.classList.add(r),s.children[0].classList.remove(r),s.children[0].classList.add(n)):(s.children[0].classList.add(r),s.children[0].classList.remove(n)));const a=o.code;e[a]=s})),this.changeLang=!1,e}globalListener(){window.addEventListener("keydown",(e=>{if(e.preventDefault(),"Shift"===e.key){if(this.shift)return;this.shift=!0,this.sortedKeys=this.sortKeys()}if("CapsLock"===e.key){if(this.caps.press)return;this.caps.on=!this.caps.on,this.caps.press=!0}const t=this.sortedKeys[e.code];t&&(t.classList.add(s),this.inputTextArea(t))})),window.addEventListener("keyup",(e=>{e.preventDefault(),("Alt"===e.key&&e.ctrlKey||"Control"===e.key&&e.altKey)&&(c.lang="en"===c.lang?"ru":"en",localStorage.setItem(o,c.lang),this.changeLang=!0,this.sortedKeys=this.sortKeys()),"Shift"===e.key&&(this.shift=!1,this.changeLang||(this.sortedKeys=this.sortKeys())),"CapsLock"===e.key&&(this.caps.press=!1);const t=this.sortedKeys[e.code];t&&t.classList.remove(s)}))}mouseListener(){const e=t=>{t.target.classList.remove(s),t.target.removeEventListener("mouseleave",e),"CapsLock"===t.target.textContent&&(this.caps.press=!1),this.textArea.focus()};this.keyboard.addEventListener("mousedown",(t=>{const n=Array.from(this.keyboard.children);let r=t.target;n.includes(r)?this.textArea.focus():(n.includes(r.parentElement)||(r=r.parentElement),r.classList.add(s),"CapsLock"===r.textContent&&(this.caps.on=!this.caps.on,this.caps.press=!0),r.addEventListener("mouseleave",e),this.inputTextArea(r))})),this.keyboard.addEventListener("mouseup",(e=>{const t=Array.from(this.keyboard.children);let n=e.target;this.textArea.focus(),t.includes(n)||("CapsLock"===n.textContent&&(this.caps.press=!1),t.includes(n.parentElement)||(n=n.parentElement),n.classList.remove(s))}))}inputTextArea(e){let t=e.childNodes[0].textContent;switch(e.children.length&&e.childNodes[1].textContent.length&&this.shift&&(t=e.childNodes[1].textContent),document.activeElement!==this.textArea&&(this.textArea.focus(),this.textArea.selectionStart=this.textArea.value.length,this.textArea.selectionEnd=this.textArea.value.length),t){case"Del":this.textArea.selectionStart===this.textArea.selectionEnd&&(this.textArea.selectionEnd=this.textArea.selectionStart+1),this.textArea.setRangeText("");break;case"Backspace":this.textArea.selectionStart&&this.textArea.selectionStart===this.textArea.selectionEnd&&(this.textArea.selectionStart=this.textArea.selectionEnd-1),this.textArea.setRangeText("");break;case"Enter":t="\n";break;case"Tab":t="\t"}1!==t.length&&"\n"!==t&&"\t"!==t||((this.caps.on&&!this.shift||!this.caps.on&&this.shift)&&(t=t.toUpperCase()),this.textArea.selectionStart===this.textArea.selectionEnd?(this.textArea.setRangeText(t),this.textArea.selectionEnd+=1,this.textArea.selectionStart=this.textArea.selectionEnd):(this.textArea.setRangeText(t),this.textArea.selectionStart=this.textArea.selectionEnd))}}(x,E,y);k.globalListener(),k.mouseListener(),u.appendChild(f),p.appendChild(y),p.appendChild(x),g.appendChild(p),m.appendChild(u),m.appendChild(g),m.appendChild(A),document.body.appendChild(m)})();
//# sourceMappingURL=main.js.map